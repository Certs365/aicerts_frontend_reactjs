import { useTheme } from '../context/ThemeContext';
import { useEffect, useState } from 'react';

const ThemeSwitcher = () => {
  const { isDarkMode, toggleTheme } = useTheme();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  const [storedTheme, setStoredTheme] = useState(() => {
    if (typeof window !== 'undefined') {
      const theme = sessionStorage.getItem('isDarkMode');
      return theme ? JSON.parse(theme) : isDarkMode;
    }
    return isDarkMode;
  });

  useEffect(() => {
    setStoredTheme(isDarkMode);
  }, [isDarkMode]);

  if (!mounted) {
    return null;
  }

  return (
    <div onClick={toggleTheme} style={{ cursor: 'pointer' }}>
      {storedTheme ? ( 
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none">
          <g clipPath="url(#clip0_7017_105444)">
            <rect width="50" height="50" fill="#2A2E36"/>
            <g clipPath="url(#clip1_7017_105444)">
            <path d="M25.0004 18.989C21.6858 18.989 18.9893 21.686 18.9893 25.0006C18.9893 28.3153 21.6858 31.0123 25.0004 31.0123C28.3145 31.0123 31.0116 28.3158 31.0116 25.0006C31.0116 21.6855 28.3145 18.989 25.0004 18.989Z" fill="white"/>
            <path d="M25.001 17.2218C24.3532 17.2218 23.8281 16.6967 23.8281 16.0494V14.1729C23.8281 13.5251 24.3532 13 25.001 13C25.6489 13 26.1739 13.5251 26.1739 14.1729V16.0494C26.1739 16.6967 25.6483 17.2218 25.001 17.2218Z" fill="white"/>
            <path d="M25.001 32.778C24.3532 32.778 23.8281 33.3031 23.8281 33.9509V35.8269C23.8281 36.4753 24.3532 37.0003 25.001 37.0003C25.6489 37.0003 26.1739 36.4753 26.1739 35.8269V33.9509C26.1739 33.3031 25.6483 32.778 25.001 32.778Z" fill="white"/>
            <path d="M30.4994 19.5001C30.0419 19.042 30.0419 18.2996 30.4994 17.8415L31.8264 16.5144C32.284 16.0569 33.027 16.0569 33.4851 16.5144C33.9432 16.9725 33.9432 17.7155 33.4851 18.1731L32.1581 19.5001C31.7005 19.9582 30.9581 19.9582 30.4994 19.5001Z" fill="white"/>
            <path d="M19.5009 30.5002C19.0428 30.0416 18.3004 30.0416 17.8423 30.5002L16.5153 31.8267C16.0577 32.2843 16.0571 33.0278 16.5153 33.4853C16.9734 33.9429 17.7163 33.9429 18.1739 33.4853L19.5009 32.1578C19.959 31.7002 19.959 30.9573 19.5009 30.5002Z" fill="white"/>
            <path d="M32.7783 24.9997C32.7783 24.3519 33.3034 23.8268 33.9512 23.8268H35.8277C36.4756 23.8268 37.0006 24.3519 37.0006 24.9997C37.0006 25.6476 36.4756 26.1721 35.8277 26.1721H33.9512C33.3034 26.1721 32.7783 25.6476 32.7783 24.9997Z" fill="white"/>
            <path d="M17.2218 25C17.2218 24.3522 16.6967 23.8271 16.0489 23.8271H14.1729C13.5251 23.8271 13 24.3522 13 25C13 25.6478 13.5251 26.1723 14.1729 26.1723H16.0494C16.6967 26.1723 17.2218 25.6478 17.2218 25Z" fill="white"/>
            <path d="M30.4998 30.5007C30.9579 30.0431 31.7009 30.0431 32.1585 30.5007L33.4855 31.8277C33.9436 32.2848 33.9436 33.0283 33.4855 33.4858C33.0274 33.9434 32.2849 33.9434 31.8268 33.4858L30.4998 32.1588C30.0417 31.7007 30.0417 30.9583 30.4998 30.5007Z" fill="white"/>
            <path d="M19.5011 19.4999C19.9592 19.0418 19.9592 18.2994 19.5011 17.8413L18.1741 16.5148C17.716 16.0567 16.9736 16.0567 16.5155 16.5148C16.0573 16.9724 16.0573 17.7153 16.5155 18.1729L17.8425 19.4999C18.3006 19.9585 19.043 19.9585 19.5011 19.4999Z" fill="white"/>
            </g>
          </g>
          <defs>
            <clipPath id="clip0_7017_105444">
              <rect width="50" height="50" fill="white"/>
            </clipPath>
            <clipPath id="clip1_7017_105444">
              <rect width="24" height="24" fill="white" transform="translate(13 13)"/>
            </clipPath>
          </defs>
          </svg>
      ):(
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 50 50" fill="none">
            <g clipPath="url(#clip0_7017_19495)">
            <rect width="50" height="50" fill="#F3F3F3"/>
            <g clipPath="url(#clip1_7017_19495)">
            <path d="M36.8591 30.1665C36.7394 30.0586 36.5599 30.0193 36.3895 30.129C34.5726 31.3071 32.4632 31.9293 30.2905 31.9293C24.1039 31.9293 19.0707 26.8961 19.0707 20.7095C19.0707 18.5368 19.6928 16.4281 20.8706 14.6109C21.0772 14.2921 20.7206 13.8762 20.3755 14.0349C15.895 16.0616 13 20.5468 13 25.4612C13 32.3749 18.6246 38 25.5385 38C30.4531 38 34.9382 35.1052 36.9652 30.6248C37.0409 30.4577 36.9811 30.2764 36.8591 30.1665Z" fill="#5B5A5F"/>
            <path d="M23.4161 18.4828C24.9429 18.4828 26.1854 19.725 26.1854 21.2521C26.1854 21.4705 26.3626 21.6477 26.581 21.6477C26.7994 21.6477 26.9766 21.4705 26.9766 21.2521C26.9766 19.725 28.2191 18.4828 29.7459 18.4828C29.9643 18.4828 30.1415 18.3056 30.1415 18.0872C30.1415 17.8688 29.9643 17.6916 29.7459 17.6916C28.2191 17.6916 26.9766 16.4494 26.9766 14.9223C26.9766 14.7039 26.7994 14.5267 26.581 14.5267C26.3626 14.5267 26.1854 14.7039 26.1854 14.9223C26.1854 16.4494 24.9429 17.6916 23.4161 17.6916C23.1977 17.6916 23.0205 17.8688 23.0205 18.0872C23.0205 18.3056 23.1977 18.4828 23.4161 18.4828Z" fill="#5B5A5F"/>
            <path d="M30.8019 22.1754C32.0381 22.1754 33.0437 23.1812 33.0437 24.4172C33.0437 24.6356 33.2209 24.8128 33.4393 24.8128C33.6577 24.8128 33.8349 24.6356 33.8349 24.4172C33.8349 23.1812 34.8404 22.1754 36.0767 22.1754C36.2951 22.1754 36.4723 21.9982 36.4723 21.7798C36.4723 21.5614 36.2951 21.3842 36.0767 21.3842C34.8404 21.3842 33.8349 20.3784 33.8349 19.1424C33.8349 18.924 33.6577 18.7468 33.4393 18.7468C33.2209 18.7468 33.0437 18.924 33.0437 19.1424C33.0437 20.3784 32.0381 21.3842 30.8019 21.3842C30.5835 21.3842 30.4062 21.5614 30.4062 21.7798C30.4062 21.9982 30.5835 22.1754 30.8019 22.1754Z" fill="#5B5A5F"/>
            <path d="M29.0886 24.4178C29.0886 24.1994 28.9114 24.0222 28.693 24.0222C28.4746 24.0222 28.2974 24.1994 28.2974 24.4178C28.2974 25.363 27.5284 26.1321 26.5831 26.1321C26.3647 26.1321 26.1875 26.3093 26.1875 26.5277C26.1875 26.7461 26.3647 26.9233 26.5831 26.9233C27.5284 26.9233 28.2974 27.6924 28.2974 28.6376C28.2974 28.856 28.4746 29.0332 28.693 29.0332C28.9114 29.0332 29.0886 28.856 29.0886 28.6376C29.0886 27.6924 29.8577 26.9233 30.803 26.9233C31.0214 26.9233 31.1986 26.7461 31.1986 26.5277C31.1986 26.3093 31.0214 26.1321 30.803 26.1321C29.8577 26.1321 29.0886 25.363 29.0886 24.4178Z" fill="#5B5A5F"/>
            </g>
            </g>
            <defs>
            <clipPath id="clip0_7017_19495">
              <rect width="50" height="50" fill="white"/>
            </clipPath>
            <clipPath id="clip1_7017_19495">
             <rect width="24" height="24" fill="white" transform="translate(13 14)"/>
              </clipPath>
            </defs>
          </svg>
      )}
    </div>
  );
};

export default ThemeSwitcher;